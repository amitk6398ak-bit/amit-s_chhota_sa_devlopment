<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Number To Name by Amit's Software üòÅ (API Helper)</title>
  <style>
    :root{
      --bg:#0b1020;--card:#121a33;--muted:#95a0b8;--text:#e8ecf6;--accent:#6aa2ff;--accent2:#8b5cf6;--danger:#ff6b6b;--ok:#3ddc97
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Ubuntu,Inter,sans-serif;background:radial-gradient(1200px 800px at 80% -10%,#1a2652 0%,#0b1020 35%,#0b1020 100%);color:var(--text);display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:820px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.08);backdrop-filter: blur(6px);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
    .p{padding:20px}
    h1{font-size:clamp(20px,3.2vw,28px);margin:0;line-height:1.2}
    .sub{color:var(--muted);font-size:14px;margin-top:6px}
    .row{display:flex;gap:10px;margin-top:16px}
    .row input{flex:1;padding:14px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:#0e1530;color:var(--text);outline:none}
    .row input:focus{border-color:var(--accent)}
    .row button{padding:14px 18px;border-radius:14px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;font-weight:600;cursor:pointer}
    .row button:disabled{opacity:.6;cursor:not-allowed}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .results{margin-top:16px;display:none}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
    .tile{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    .label{font-size:12px;color:var(--muted)}
    .value{font-size:16px;margin-top:4px;word-break:break-word}
    pre{background:#0a1228;color:#dbe7ff;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;overflow:auto;max-height:360px}
    .bar{display:flex;align-items:center;gap:10px;justify-content:space-between}
    .copy{border:1px solid rgba(255,255,255,.12);background:#0e1530;color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer}
    .status{font-size:12px}
    .good{color:var(--ok)}
    .bad{color:var(--danger)}
    .loader{width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,.2);border-top-color:white;animation:spin 1s linear infinite;display:inline-block;vertical-align:middle}
    @keyframes spin{to{transform:rotate(360deg)}}
    .footer{margin-top:10px;color:var(--muted);font-size:11px}
    a{color:var(--accent)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card p">
      <h1>Number To Name by Amit's Software üòÅ</h1>
      <div class="sub">write number <code>and</code> get details </div>
      <div class="row">
        <input id="num" inputmode="numeric" autocomplete="off" placeholder="example: 6351516535" />
        <button id="go">search</button>
      </div>
      <div class="hint">note: write without country code</div>

      <div id="status" class="status" style="margin-top:10px"></div>

      <div id="results" class="results">
        <div class="grid" id="summary"></div>
        <div class="tile" style="margin-top:12px">
          <div class="bar">
            <div class="label">Raw Response (JSON/Text)</div>
            <button class="copy" id="copyBtn">copy</button>
          </div>
          <pre id="raw"></pre>
        </div>
        <div class="footer">successfully fetched by Amit's Software üòÅ</div>
      </div>
    </div>
  </div>

<script>
  const INPUT = document.getElementById('num');
  const BTN = document.getElementById('go');
  const STATUS = document.getElementById('status');
  const RESULTS = document.getElementById('results');
  const SUMMARY = document.getElementById('summary');
  const RAW = document.getElementById('raw');
  const COPY = document.getElementById('copyBtn');

  // Put your Cloudflare Worker URL here
  const API_BASE = 'https://proxy.amitk6398ak.workers.dev/?number=';

  function setStatus(msg, ok){
    STATUS.innerHTML = msg ? (ok ? `<span class="good">${msg}</span>` : `<span class="bad">${msg}</span>`) : '';
  }

  function sanitizeNumber(s){
    if(!s) return '';
    s = (''+s).replace(/\D+/g,''); // keep digits only
    if(s.length < 5 || s.length > 15) return '';
    return s;
  }

  function toggleLoading(isLoading){
    BTN.disabled = isLoading;
    BTN.innerHTML = isLoading ? '<span class="loader"></span> loading‚Ä¶' : 'search';
  }

  function findValueByKeys(obj, keys){
    for(const k of keys){
      if(k in obj && obj[k]) return obj[k];
    }
    for(const v of Object.values(obj)){
      if(v && typeof v === 'object'){
        const deep = findValueByKeys(v, keys);
        if(deep) return deep;
      }
    }
    return undefined;
  }

  function buildSummary(obj, number){
    SUMMARY.innerHTML = '';

    const probableName = findValueByKeys(obj, ['name','Name','owner','Owner','subscriber_name','customer_name','registered_name','registeredName','user','User','fullname','full_name','holder']);
    const probableCarrier = findValueByKeys(obj, ['carrier','provider','operator','company']);
    const probableState = findValueByKeys(obj, ['state','circle','region','location','address_state']);

    const items = [
      ['Number', number],
      ['Name (detected)', probableName],
      ['Carrier/Operator', probableCarrier],
      ['State/Region', probableState]
    ].filter(([,v]) => v !== undefined && v !== null && v !== '');

    if(items.length === 0){
      SUMMARY.innerHTML = '<div class="tile"><div class="label">summary</div><div class="value">nothing found</div></div>';
      return;
    }

    for(const [label, value] of items){
      const div = document.createElement('div');
      div.className = 'tile';
      div.innerHTML = `<div class="label">${label}</div><div class="value">${escapeHtml(String(value))}</div>`;
      SUMMARY.appendChild(div);
    }
  }

  function escapeHtml(str){
    return str.replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[s]));
  }

  async function lookup(){
    let number = sanitizeNumber(INPUT.value);
    RESULTS.style.display = 'none';
    RAW.textContent = '';
    SUMMARY.innerHTML = '';

    if(!number){
      setStatus('put a valid number.', false);
      return;
    }

    // If only 10 digits, automatically add 91
    if(number.length === 10){
      number = "91" + number;
    }

    toggleLoading(true);
    setStatus('request is sending‚Ä¶', true);

    try {
      const url = API_BASE + encodeURIComponent(number);
      const res = await fetch(url, { method:'GET' });

      const contentType = res.headers.get('content-type') || '';
      let data, rawText;

      if(!res.ok){
        rawText = await res.text();
        throw new Error(`HTTP ${res.status}: ${rawText.slice(0,200)}`);
      }

      if(contentType.includes('application/json')){
        data = await res.json();
        rawText = JSON.stringify(data, null, 2);
      } else {
        rawText = await res.text();
        try { data = JSON.parse(rawText); } catch { data = { response: rawText }; }
      }

      RAW.textContent = rawText;
      RESULTS.style.display = 'block';
      setStatus('success ', true);

      if(data && typeof data === 'object'){
        buildSummary(data, number);
      } else {
        SUMMARY.innerHTML = '<div class="tile"><div class="label">note</div><div class="value">JSON not found ‚Äî look down</div></div>';
      }

    } catch (err){
      setStatus('error: ' + (err && err.message ? err.message : 'Request failed'), false);
      RESULTS.style.display = 'block';
      SUMMARY.innerHTML = '<div class="tile"><div class="label">problem</div><div class="value">koi error ayi hai</div></div>';
    } finally {
      toggleLoading(false);
    }
  }

  BTN.addEventListener('click', lookup);
  INPUT.addEventListener('keydown', (e)=>{ if(e.key==='Enter') lookup(); });
  COPY.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(RAW.textContent || '');
      COPY.textContent = 'copied';
      setTimeout(()=> COPY.textContent='‡§ï‡•â‡§™‡•Ä', 1200);
    }catch{ /* ignore */ }
  });

  // Default input will remain empty
  INPUT.value = '';
</script>
</body>
</html>